<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>웹 브라우저에서의 유효성 검사</title>

<script>
	window.addEventListener("load", function(e){
		//body 태그 안에서 필요한 객체 찾아오기 - id를 이용해서 찾아오기
		var myform = document.getElementById("myform");
		var errordiv = document.getElementById("errordiv");
		var email = document.getElementById("email");
		var pw = document.getElementById("pw");
		
		//이메일 정규식을 생성
		var emailreg = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
		//비밀번호 정규식을 생성
		var pwreg = /^.*(?=^.{8,15}$)(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&+=]).*$/;
		
		//폼의 전송 이벤트가 발생하면 유효성 검사를 수행
		myform.addEventListener("submit", function(e){
			//email 란에 입력된 문자열에 emailreg가 포함되지 않았다면
			if(emailreg.test(email.value) == false){
				//에러 메시지 출력
				errordiv.innerHTML = "이메일 입력 형식이 잘못되었습니다.";
				errordiv.style.color = "red";
				//포커스 이동
				email.focus();
				//기본적으로 제공되는 이벤트 처리 코드를 제거 - 폼의 데이터가 전송되지 않음
				var evt = window.event || e;
				evt.preventDefault();
				return;
			}
			if(pwreg.test(pw.value) == false){
				//에러 메시지 출력
				errordiv.innerHTML = "비밀번호 입력 형식이 잘못되었습니다.";
				errordiv.style.color = "red";
				//포커스 이동
				pw.focus();
				//기본적으로 제공되는 이벤트 처리 코드를 제거 - 폼의 데이터가 전송되지 않음
				var evt = window.event || e;
				evt.preventDefault();
				return;
			}
			
		});

	});
	
	try{
		//이 문장에서 예외가 발생하면 멈추지 않고 catch 구문으로 이동하기 때문에 멈추지 않습니다.
		var ar = new Array(4300000000);
	}catch(e){
		console.log("배열 생성에 실패했습니다.")
	}
	
	alert("여기까지 수행")
</script>

</head>
<body>
	<form action="server.jsp" id="myform">
		<div id="errordiv"></div>
		<label for="email">이메일</label>
		<input type="text" size="40" id="email" name="email"/><br/>
		
		<label for="pw">비밀번호</label>
		<input type="password" size="20" id="pw" name="pw"/><br />
		
		<label for="name">이름</label>
		<input type="name" size="15" id="name" name="name"/><br/>
		
		<input type="submit" value="전송"/>
	</form>
	
	<script>
		
	</script>
</body>
</html>






